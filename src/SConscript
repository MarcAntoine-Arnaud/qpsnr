
Import( 'env' )
Import( 'envPy' )

qpsnrLib = env.SharedLibrary(
	'qpsnr',
	Glob( '*.cpp' ),
	LIBS = [
		"avutil",
		"avcodec",
		"avformat",
		"swscale",
	],
)

qpsnrLibStatic = env.StaticLibrary(
	'qpsnr',
	Glob( '*.cpp' ),
	LIBS = [
		"avutil",
		"avcodec",
		"avformat",
		"swscale",
	],
)

pythonQpsnr = envPy.SharedLibrary(
	'pyQpsnr',
	source='qpsnr.i',
	LIBS=[
		qpsnrLib,
		'avutil',
		'avcodec',
		'avformat',
		'swscale',
		'python',
	],
)

Command("__init__.py", None, [ Touch("$TARGET"), ])

env.Alias( 'install', env.InstallVersionedLib( 'lib', qpsnrLib ) )
env.Alias( 'install', env.Install( 'lib', qpsnrLibStatic ) )
env.Alias( "install", env.InstallVersionedLib( 'lib', pythonQpsnr ) )

env.Alias( "install", env.Install( "include" , 'qpsnr.hpp' ) )
env.Alias( "install", env.Install( "lib/python2.7/site-packages/qpsnr", Glob( 'qpsnr.py' ) ) )
env.Alias( "install", env.Install( "lib/python2.7/site-packages/qpsnr", "__init__.py" ) )

Export( 'qpsnrLib' )
Export( 'qpsnrLibStatic' )
